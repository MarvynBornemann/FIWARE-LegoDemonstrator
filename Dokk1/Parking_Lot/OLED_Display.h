#pragma once

#include <Arduino.h>

#include <U8g2lib.h>
#include <Wire.h>

#define WIO_NODE_SCL_PIN 4
#define WIO_NODE_SDA_PIN 5

#define NUMBER_OF_LINES 5

const unsigned char Parking[] U8X8_PROGMEM = {// 'Zeichen_314_-_Parken,_StVO_2017', 64x64px
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0xbb, 0xbb, 0xbb,
   0xbb, 0xbb, 0xbb, 0x1b, 0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3f,
   0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0xff, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0xff, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x00, 0x00,
   0xc0, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0x00, 0x00, 0x00, 0xfe, 0xff, 0x7f,
   0xfe, 0xff, 0x01, 0x00, 0x00, 0xf8, 0xff, 0x7f, 0xfe, 0xff, 0x00, 0x00,
   0x00, 0xf0, 0xff, 0x7f, 0xfe, 0xff, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x3f,
   0xfe, 0xff, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x7f, 0xfe, 0xff, 0x81, 0xff,
   0x0f, 0xc0, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0x3f, 0xc0, 0xff, 0x7f,
   0xfe, 0xff, 0x80, 0xff, 0x7f, 0x80, 0xff, 0x3f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0x80, 0xff, 0x7f, 0xfe, 0xff, 0x81, 0xff, 0xff, 0x01, 0xff, 0x7f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0x81, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0x01, 0xff, 0x3f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0x81, 0xff, 0x7f,
   0xfe, 0xff, 0x81, 0xff, 0xff, 0x01, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0x80, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0x80, 0xff, 0x3f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0x80, 0xff, 0x7f, 0xfe, 0xff, 0x81, 0xff,
   0x7f, 0x80, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0x1f, 0xc0, 0xff, 0x7f,
   0xfe, 0xff, 0x00, 0x22, 0x01, 0xc0, 0xff, 0x3f, 0xfe, 0xff, 0x00, 0x00,
   0x00, 0xe0, 0xff, 0x7f, 0xfe, 0xff, 0x00, 0x00, 0x00, 0xf0, 0xff, 0x7f,
   0xfe, 0xff, 0x00, 0x00, 0x00, 0xf8, 0xff, 0x7f, 0xfe, 0xff, 0x00, 0x00,
   0x00, 0xfc, 0xff, 0x3f, 0xfe, 0xff, 0x00, 0x00, 0x00, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0x01, 0x00, 0xe8, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x3f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0x81, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x3f,
   0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0x80, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0xf7, 0xff, 0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0xff, 0xff,
   0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfe, 0xff, 0xff, 0xff,
   0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f,
   0xfc, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xfc, 0xff, 0xff, 0xff,
   0xff, 0xff, 0xff, 0x3f, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0f,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

class OLED_Display
{
    private:
        U8G2_SSD1306_128X64_NONAME_F_HW_I2C* u8g2;

        String stringBuffer[NUMBER_OF_LINES];
        int bufferIndex = 0;

    public:
        OLED_Display();
        ~OLED_Display();
        
        void setup();
        void prepare();

        void println(String string);

        void display(int numberOfFreeParkingLots);

        void drawBitmap();
};